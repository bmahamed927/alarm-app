<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Pink Study Alarm</title>

<style>
:root{
  --main:#d81b60;
  --bg:#fce4ec;
}
body{
  direction:rtl;
  font-family:Arial;
  background:linear-gradient(var(--main),var(--bg));
  margin:0;
  padding:5px;
  max-width:480px;
  margin:auto;
}
.header{text-align:center;color:var(--main);margin:5px 0;}
.box{background:white;padding:10px;border-radius:10px;margin-bottom:8px;}

input,select{
  width:85%;
  padding:8px;
  margin:4px auto;
  display:block;
  font-size:15px;
  border-radius:6px;
  box-sizing:border-box;
}
button{
  width:85%;
  padding:10px;
  margin:6px auto;
  display:block;
  background:var(--main);
  color:white;
  border:none;
  border-radius:6px;
}

table{width:100%;border-collapse:collapse;font-size:13px;}
th,td{border:1px solid #ccc;padding:4px;text-align:center;}

.actions{display:flex;justify-content:center;gap:6px;}
.icon-btn{
  display:flex;align-items:center;justify-content:center;
  width:34px;height:34px;border-radius:50%;color:white;font-size:18px;
}
.icon-btn.edit{background:#8e24aa;}
.icon-btn.delete{background:#e53935;}

@media (min-width:768px){body{display:none;}}
</style>
</head>

<body>

<!-- Ø´Ø§Ø´Ø© Ø§Ù„Ù‚ÙÙ„ -->
<div id="lockScreen" style="position:fixed;top:0;left:0;width:100%;height:100%;
background:#fce4ec;display:flex;flex-direction:column;
align-items:center;justify-content:center;z-index:9999;">
<h2>ğŸ”’ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ù…Ø­Ù…ÙŠ</h2>
<p>Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø±</p>
<input type="password" id="appPassword" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø±">
<button onclick="checkPassword()">Ø¯Ø®ÙˆÙ„</button>
<p style="font-size:13px;color:#555;">Ø­Ù‚ÙˆÙ‚ Ø§Ù„Ù…Ù„ÙƒÙŠØ© Â© Ù…Ø­Ù…Ø¯ Ø¹Ø¨Ø¯ Ø§Ù„Ù†Ø¹ÙŠÙ… Ø³Ù„Ø§Ø·ÙŠÙ†</p>
<p id="errorMsg" style="color:red"></p>
</div>

<div class="box">
<h2 class="header">ğŸ€ Pink Study Alarm</h2>

<button onclick="toggleNotifications()">ğŸ”” ØªØ´ØºÙŠÙ„ / Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª</button>

<input id="subject" placeholder="Ø§Ù„Ù…Ø§Ø¯Ø©">
<input id="teacher" placeholder="Ø§Ø³Ù… Ø§Ù„Ø£Ø³ØªØ§Ø°">

<select id="day">
<option>Ø§Ù„Ø³Ø¨Øª</option>
<option>Ø§Ù„Ø£Ø­Ø¯</option>
<option>Ø§Ù„Ø§Ø«Ù†ÙŠÙ†</option>
<option>Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡</option>
<option>Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡</option>
<option>Ø§Ù„Ø®Ù…ÙŠØ³</option>
<option>Ø§Ù„Ø¬Ù…Ø¹Ø©</option>
</select>

<label>Ù…Ù† Ø§Ù„Ø³Ø§Ø¹Ø©:</label>
<input type="time" id="fromTime">

<label>Ø¥Ù„Ù‰ Ø§Ù„Ø³Ø§Ø¹Ø©:</label>
<input type="time" id="toTime">

<select id="term">
<option>Ø§Ù„ØªØ±Ù… 1</option>
<option>Ø§Ù„ØªØ±Ù… 2</option>
</select>

<select id="remindBefore">
<option value="5">Ù‚Ø¨Ù„ 5 Ø¯Ù‚Ø§Ø¦Ù‚</option>
<option value="10">Ù‚Ø¨Ù„ 10 Ø¯Ù‚Ø§Ø¦Ù‚</option>
<option value="15">Ù‚Ø¨Ù„ 15 Ø¯Ù‚ÙŠÙ‚Ø©</option>
<option value="30">Ù‚Ø¨Ù„ 30 Ø¯Ù‚ÙŠÙ‚Ø©</option>
</select>

<button onclick="addLesson()">ğŸ’¾ Ø­ÙØ¸ Ø§Ù„Ø¯Ø±Ø³</button>
</div>

<!-- ÙÙ„ØªØ± Ø­Ø³Ø¨ Ø§Ù„ÙŠÙˆÙ… -->
<div class="box">
<select id="filterDay" onchange="displayLessons()">
<option value="Ø§Ù„ÙƒÙ„">ğŸ“… ÙƒÙ„ Ø§Ù„Ø£ÙŠØ§Ù…</option>
<option value="Ø§Ù„Ø³Ø¨Øª">Ø§Ù„Ø³Ø¨Øª</option>
<option value="Ø§Ù„Ø£Ø­Ø¯">Ø§Ù„Ø£Ø­Ø¯</option>
<option value="Ø§Ù„Ø§Ø«Ù†ÙŠÙ†">Ø§Ù„Ø§Ø«Ù†ÙŠÙ†</option>
<option value="Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡">Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡</option>
<option value="Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡">Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡</option>
<option value="Ø§Ù„Ø®Ù…ÙŠØ³">Ø§Ù„Ø®Ù…ÙŠØ³</option>
<option value="Ø§Ù„Ø¬Ù…Ø¹Ø©">Ø§Ù„Ø¬Ù…Ø¹Ø©</option>
</select>
</div>

<div class="box">
<table>
<thead>
<tr>
<th>Ø§Ù„Ù…Ø§Ø¯Ø©</th>
<th>Ø§Ù„ÙŠÙˆÙ…</th>
<th>Ø§Ù„Ø£Ø³ØªØ§Ø°</th>
<th>Ø§Ù„ÙˆÙ‚Øª</th>
<th>Ø§Ù„ØªØ±Ù…</th>
<th>Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
</tr>
</thead>
<tbody id="lessonList"></tbody>
</table>
</div>

<div style="text-align:center;font-size:12px;color:#555;">
Ø­Ù‚ÙˆÙ‚ Ø§Ù„Ù…Ù„ÙƒÙŠØ© Â© Ù…Ø­Ù…Ø¯ Ø¹Ø¨Ø¯ Ø§Ù„Ù†Ø¹ÙŠÙ… Ø³Ù„Ø§Ø·ÙŠÙ†
</div>

<script>
const OWNER_PASSWORD = "Ù…Ø­Ù…Ø¯2026";
let notificationsEnabled = true;

window.onload = function(){
  if(localStorage.getItem("authorized")==="true"){
    lockScreen.style.display="none";
  }
}

function checkPassword(){
  if(appPassword.value === OWNER_PASSWORD){
    localStorage.setItem("authorized","true");
    lockScreen.style.display="none";
  } else {
    errorMsg.innerText="âŒ ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø± ØºÙŠØ± ØµØ­ÙŠØ­Ø©";
  }
}

let lessons = JSON.parse(localStorage.getItem("lessons")) || [];
let editIndex = -1;

const daysOrder = ["Ø§Ù„Ø³Ø¨Øª","Ø§Ù„Ø£Ø­Ø¯","Ø§Ù„Ø§Ø«Ù†ÙŠÙ†","Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡","Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡","Ø§Ù„Ø®Ù…ÙŠØ³","Ø§Ù„Ø¬Ù…Ø¹Ø©"];

function formatTime12(time){
  let [h,m]=time.split(":");
  h=parseInt(h);
  let p=h>=12?"Ù…":"Øµ";
  h=h%12;if(h==0)h=12;
  return h+":"+m+" "+p;
}

function toggleNotifications(){
  notificationsEnabled = !notificationsEnabled;
  alert(notificationsEnabled ? "ğŸ”” ØªÙ… ØªØ´ØºÙŠÙ„ Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª" : "ğŸ”• ØªÙ… Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª");
}

function sortLessons(){
  lessons.sort((a,b)=>{
    let d = daysOrder.indexOf(a.day) - daysOrder.indexOf(b.day);
    if(d!==0) return d;
    return a.fromTime.localeCompare(b.fromTime);
  });
}

function addLesson(){
  let lesson={
    subject:subject.value,
    teacher:teacher.value,
    day:day.value,
    fromTime:fromTime.value,
    toTime:toTime.value,
    term:term.value,
    remindBefore:remindBefore.value
  };

  if(editIndex===-1) lessons.push(lesson);
  else { lessons[editIndex]=lesson; editIndex=-1; }

  sortLessons();
  localStorage.setItem("lessons",JSON.stringify(lessons));
  clearForm();
  displayLessons();
  if(notificationsEnabled) setReminder(lesson);
}

function displayLessons(){
  let filter = document.getElementById("filterDay").value;
  lessonList.innerHTML="";
  lessons.forEach((l,i)=>{
    if(filter==="Ø§Ù„ÙƒÙ„" || l.day===filter){
      lessonList.innerHTML+=`
      <tr>
        <td>${l.subject}</td>
        <td>${l.day}</td>
        <td>${l.teacher}</td>
        <td>${formatTime12(l.fromTime)} - ${formatTime12(l.toTime)}</td>
        <td>${l.term}</td>
        <td class="actions">
          <div class="icon-btn edit" onclick="editLesson(${i})">âœï¸</div>
          <div class="icon-btn delete" onclick="deleteLesson(${i})">ğŸ—‘ï¸</div>
        </td>
      </tr>`;
    }
  });
}

function editLesson(i){
  let l=lessons[i];
  subject.value=l.subject;
  teacher.value=l.teacher;
  day.value=l.day;
  fromTime.value=l.fromTime;
  toTime.value=l.toTime;
  term.value=l.term;
  remindBefore.value=l.remindBefore;
  editIndex=i;
}

function deleteLesson(i){
  lessons.splice(i,1);
  localStorage.setItem("lessons",JSON.stringify(lessons));
  displayLessons();
}

function clearForm(){
  subject.value="";
  teacher.value="";
  fromTime.value="";
  toTime.value="";
}

function setReminder(l){
  let now=new Date();
  let t=new Date();
  let [h,m]=l.fromTime.split(":");
  t.setHours(h,m,0);
  let diff=t-now-(l.remindBefore*60000);
  if(diff>0){
    setTimeout(()=>{
      new Notification("ğŸ“š ØªØ°ÙƒÙŠØ± Ø¨Ø§Ù„Ø¯Ø±Ø³",{
        body:`Ø¯Ø±Ø³ ${l.subject} Ù…Ù† ${formatTime12(l.fromTime)} Ø¥Ù„Ù‰ ${formatTime12(l.toTime)}`
      });
    },diff);
  }
}

if(Notification.permission!=="granted"){
  Notification.requestPermission();
}

sortLessons();
displayLessons();
</script>

</body>
</html>